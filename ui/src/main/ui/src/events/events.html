
<div class="container-fluid container-cards-pf" ng-controller="hwk.eventsController">

  <div class="row row-cards-pf" ng-hide="selectedTenant == null || selectedTenant == ''">

    <!-- Toolbar Datetime Range-->

    <div class="row toolbar-pf" ng-hide="selectedTenant == null || selectedTenant == ''">
      <div class="col-md-12">
        <form class="toolbar-pf-actions">
          <div class="form-group" ng-style="{'width':'40%'}">
            <div>Date Range</div>
            <div class="input-group input-daterange">
              <input id="start" type="date" class="form-control bootstrap-datepicker" ng-model="filter.date.start" ng-change="updateFilter()" readonly />
              <div class="input-group-addon">to</div>
              <input id="end" type="date" class="form-control  bootstrap-datepicker" ng-model="filter.date.end" ng-change="updateFilter()" readonly />
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Toolbar Filters-->

    <div class="row toolbar-pf" id="toolbar">
      <div class="col-md-12">
        <form class="toolbar-pf-actions" ng-submit="updateFilter()">
          <div class="form-group toolbar-pf-filter" ng-style="{'width':'40%'}">
            <div class="input-group">
              <div class="input-group-btn">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Tag Query <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li class="selected"><a href="#/events">Tag Query</a></li>
                </ul>
              </div>
              <input type="text" class="form-control" ng-model="filter.tag.tagQuery" id="filter.tag.tagQuery" placeholder="Filter By Tag Query..." />
            </div>
          </div>
          <div class="form-group">
            <div class="dropdown btn-group  dropdown-kebab-pf">
              <button class="btn btn-link dropdown-toggle" type="button" id="eventsKebab" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="fa fa-ellipsis-v"></span>
              </button>
              <ul class="dropdown-menu " aria-labelledby="alertsKebab">
                <li role="separator" class="divider"></li>
                <li ng-click="deleteSelected()"><a>Delete Selected (TD?)</a></li>
              </ul>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- List of rows -->

    <div class="list-group list-view-pf list-view-pf-view">

      <!-- Full Row details-->

      <div class="list-group-item" ng-repeat="eventItem in eventsList" repeat-done>

        <!-- Action column found on the right of each row -->

        <div class="list-view-pf-checkbox">
          <input type="checkbox" />
        </div>
        <div class="list-view-pf-actions">
          <div class="dropdown pull-right dropdown-kebab-pf">
            <button class="btn btn-link dropdown-toggle" type="button" id="dropdownKebabRight1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              <span class="fa fa-ellipsis-v"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownKebabRight1">
              <li role="separator" class="divider"></li>
              <li><a href ng-click="deleteEvent(eventItem.id)">Delete</a></li>
            </ul>
          </div>
        </div>

        <!-- Main Row -->

        <div class="list-view-pf-main-info">

          <!-- Alert type icon (open/ack/resolved/event) -->
          <div class="list-view-pf-left">
            <span class="pficon pficon-topology"></span> <!-- event -->
          </div>

          <div class="list-view-pf-body">

            <div class="list-view-pf-description">
              <!-- Event category -->
              <div class="list-group-item-heading">{{ eventItem.category }}</div>
              <!-- Text description - a brief summary -->
              <div class="list-group-item-text">{{ eventItem.ctime | date:'yyyy-MM-dd HH:mm:ss Z' }}</div>
            </div>

            <!-- Expandable sections -->

            <div class="list-view-pf-additional-info">

              <!-- Details -->
              <div class="list-view-pf-additional-info-item">
                <div class="list-view-pf-expand">
                  <span class="fa fa-angle-right"></span> <span class="pficon pficon-info"></span> Details
                </div>
              </div>

              <!-- Tags -->
              <div class="list-view-pf-additional-info-item">
                <div class="list-view-pf-expand">
                  <span class="fa fa-angle-right"></span> <span class="pficon pficon-repository"></span> <strong>{{ eventItem.tags ? eventItem.tags.length : 0 }}</strong> Tags
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- The expanded sections -->

        <!-- Details -->
        <div class="list-group-item-container container-fluid hidden">
          <div class="close">
            <span class="pficon pficon-close"></span>
          </div>

          <!-- category and main alert details -->
          <div class="row">
            <div class="col-md-12">
              <p>
                <b>Data ID:</b> {{ eventItem.dataId }} <br /> <b>Event Text:</b> {{ eventItem.text }}
              </p>
            </div>
          </div>
        </div>

        <!-- Tags -->
        <div class="list-group-item-container container-fluid hidden">
          <div class="close">
            <span class="pficon pficon-close"></span>
          </div>
          <div class="row">
            <div class="col-md-12">
              <dl class="dl-horizontal">
                <dt ng-repeat-start="tag in eventItem.tags">{{tag.key}}:</dt>
                <dd ng-repeat-end>{{tag.value}}</dd>
              </dl>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- small screen content when no tenant is entered -->

  <div class="row row-cards-pf" ng-show="selectedTenant == null || selectedTenant == ''">
    <div class="col-md-12">
      <div class="card-pf">
        <div class="card-pf-heading">
          <p class="card-pf-heading-details"></p>
          <h2 class="card-pf-title">Select a Tenant</h2>
        </div>
        <div class="card-pf-body">Use the upper right form to select a tenant which fetch data from Hawkular Alerting.</div>
      </div>
    </div>
  </div>

</div>

<script>
  // Initialize Boostrap-datepicker
  $('#start').datepicker({
    format: 'yyyy-mm-dd', // required to be declared like this
    autoclose: true,
    todayBtn: 'linked',
    todayHighlight: true
  });
  $('#end').datepicker({
    format: 'yyyy-mm-dd', // required to be declared like this
    autoclose: true,
    todayBtn: 'linked',
    todayHighlight: true
  });
</script>
